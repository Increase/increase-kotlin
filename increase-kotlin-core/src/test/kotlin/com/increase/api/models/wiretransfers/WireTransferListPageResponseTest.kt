// File generated from our OpenAPI spec by Stainless.

package com.increase.api.models.wiretransfers

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.increase.api.core.jsonMapper
import java.time.LocalDate
import java.time.OffsetDateTime
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class WireTransferListPageResponseTest {

    @Test
    fun create() {
        val wireTransferListPageResponse =
            WireTransferListPageResponse.builder()
                .addData(
                    WireTransfer.builder()
                        .id("wire_transfer_5akynk7dqsq25qwk9q2u")
                        .accountId("account_in71c4amph0vgo2qllky")
                        .accountNumber("987654321")
                        .amount(100L)
                        .approval(
                            WireTransfer.Approval.builder()
                                .approvedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .approvedBy(null)
                                .build()
                        )
                        .beneficiaryAddressLine1(null)
                        .beneficiaryAddressLine2(null)
                        .beneficiaryAddressLine3(null)
                        .beneficiaryName(null)
                        .cancellation(
                            WireTransfer.Cancellation.builder()
                                .canceledAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .canceledBy(null)
                                .build()
                        )
                        .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                        .createdBy(
                            WireTransfer.CreatedBy.builder()
                                .apiKey(
                                    WireTransfer.CreatedBy.ApiKey.builder()
                                        .description("description")
                                        .build()
                                )
                                .category(WireTransfer.CreatedBy.Category.USER)
                                .oauthApplication(
                                    WireTransfer.CreatedBy.OAuthApplication.builder()
                                        .name("name")
                                        .build()
                                )
                                .user(
                                    WireTransfer.CreatedBy.User.builder()
                                        .email("user@example.com")
                                        .build()
                                )
                                .build()
                        )
                        .currency(WireTransfer.Currency.USD)
                        .externalAccountId("external_account_ukk55lr923a3ac0pp7iv")
                        .idempotencyKey(null)
                        .inboundWireDrawdownRequestId(null)
                        .messageToRecipient("Message to recipient")
                        .network(WireTransfer.Network.WIRE)
                        .originatorAddressLine1(null)
                        .originatorAddressLine2(null)
                        .originatorAddressLine3(null)
                        .originatorName(null)
                        .pendingTransactionId(null)
                        .remittance(
                            WireTransfer.Remittance.builder()
                                .category(WireTransfer.Remittance.Category.UNSTRUCTURED)
                                .tax(
                                    WireTransfer.Remittance.Tax.builder()
                                        .date(LocalDate.parse("2019-12-27"))
                                        .identificationNumber("identification_number")
                                        .typeCode("type_code")
                                        .build()
                                )
                                .unstructured(
                                    WireTransfer.Remittance.Unstructured.builder()
                                        .message("Payment for invoice 12345")
                                        .build()
                                )
                                .build()
                        )
                        .reversal(
                            WireTransfer.Reversal.builder()
                                .amount(12345L)
                                .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .debtorRoutingNumber("101050001")
                                .description("Inbound wire reversal 2022021100335128")
                                .inputCycleDate(LocalDate.parse("2022-02-11"))
                                .inputMessageAccountabilityData("20220211B6B7HU2R011023")
                                .inputSequenceNumber("11023")
                                .inputSource("B6B7HU2R")
                                .instructionIdentification(null)
                                .returnReasonAdditionalInformation(null)
                                .returnReasonCode(null)
                                .returnReasonCodeDescription(null)
                                .transactionId("transaction_uyrp7fld2ium70oa7oi")
                                .wireTransferId("wire_transfer_5akynk7dqsq25qwk9q2u")
                                .build()
                        )
                        .routingNumber("101050001")
                        .sourceAccountNumberId(null)
                        .status(WireTransfer.Status.COMPLETE)
                        .submission(
                            WireTransfer.Submission.builder()
                                .inputMessageAccountabilityData("20220118MMQFMP0P000002")
                                .submittedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .build()
                        )
                        .transactionId("transaction_uyrp7fld2ium70oa7oi")
                        .type(WireTransfer.Type.WIRE_TRANSFER)
                        .build()
                )
                .nextCursor("v57w5d")
                .build()

        assertThat(wireTransferListPageResponse.data())
            .containsExactly(
                WireTransfer.builder()
                    .id("wire_transfer_5akynk7dqsq25qwk9q2u")
                    .accountId("account_in71c4amph0vgo2qllky")
                    .accountNumber("987654321")
                    .amount(100L)
                    .approval(
                        WireTransfer.Approval.builder()
                            .approvedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                            .approvedBy(null)
                            .build()
                    )
                    .beneficiaryAddressLine1(null)
                    .beneficiaryAddressLine2(null)
                    .beneficiaryAddressLine3(null)
                    .beneficiaryName(null)
                    .cancellation(
                        WireTransfer.Cancellation.builder()
                            .canceledAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                            .canceledBy(null)
                            .build()
                    )
                    .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                    .createdBy(
                        WireTransfer.CreatedBy.builder()
                            .apiKey(
                                WireTransfer.CreatedBy.ApiKey.builder()
                                    .description("description")
                                    .build()
                            )
                            .category(WireTransfer.CreatedBy.Category.USER)
                            .oauthApplication(
                                WireTransfer.CreatedBy.OAuthApplication.builder()
                                    .name("name")
                                    .build()
                            )
                            .user(
                                WireTransfer.CreatedBy.User.builder()
                                    .email("user@example.com")
                                    .build()
                            )
                            .build()
                    )
                    .currency(WireTransfer.Currency.USD)
                    .externalAccountId("external_account_ukk55lr923a3ac0pp7iv")
                    .idempotencyKey(null)
                    .inboundWireDrawdownRequestId(null)
                    .messageToRecipient("Message to recipient")
                    .network(WireTransfer.Network.WIRE)
                    .originatorAddressLine1(null)
                    .originatorAddressLine2(null)
                    .originatorAddressLine3(null)
                    .originatorName(null)
                    .pendingTransactionId(null)
                    .remittance(
                        WireTransfer.Remittance.builder()
                            .category(WireTransfer.Remittance.Category.UNSTRUCTURED)
                            .tax(
                                WireTransfer.Remittance.Tax.builder()
                                    .date(LocalDate.parse("2019-12-27"))
                                    .identificationNumber("identification_number")
                                    .typeCode("type_code")
                                    .build()
                            )
                            .unstructured(
                                WireTransfer.Remittance.Unstructured.builder()
                                    .message("Payment for invoice 12345")
                                    .build()
                            )
                            .build()
                    )
                    .reversal(
                        WireTransfer.Reversal.builder()
                            .amount(12345L)
                            .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                            .debtorRoutingNumber("101050001")
                            .description("Inbound wire reversal 2022021100335128")
                            .inputCycleDate(LocalDate.parse("2022-02-11"))
                            .inputMessageAccountabilityData("20220211B6B7HU2R011023")
                            .inputSequenceNumber("11023")
                            .inputSource("B6B7HU2R")
                            .instructionIdentification(null)
                            .returnReasonAdditionalInformation(null)
                            .returnReasonCode(null)
                            .returnReasonCodeDescription(null)
                            .transactionId("transaction_uyrp7fld2ium70oa7oi")
                            .wireTransferId("wire_transfer_5akynk7dqsq25qwk9q2u")
                            .build()
                    )
                    .routingNumber("101050001")
                    .sourceAccountNumberId(null)
                    .status(WireTransfer.Status.COMPLETE)
                    .submission(
                        WireTransfer.Submission.builder()
                            .inputMessageAccountabilityData("20220118MMQFMP0P000002")
                            .submittedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                            .build()
                    )
                    .transactionId("transaction_uyrp7fld2ium70oa7oi")
                    .type(WireTransfer.Type.WIRE_TRANSFER)
                    .build()
            )
        assertThat(wireTransferListPageResponse.nextCursor()).isEqualTo("v57w5d")
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val wireTransferListPageResponse =
            WireTransferListPageResponse.builder()
                .addData(
                    WireTransfer.builder()
                        .id("wire_transfer_5akynk7dqsq25qwk9q2u")
                        .accountId("account_in71c4amph0vgo2qllky")
                        .accountNumber("987654321")
                        .amount(100L)
                        .approval(
                            WireTransfer.Approval.builder()
                                .approvedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .approvedBy(null)
                                .build()
                        )
                        .beneficiaryAddressLine1(null)
                        .beneficiaryAddressLine2(null)
                        .beneficiaryAddressLine3(null)
                        .beneficiaryName(null)
                        .cancellation(
                            WireTransfer.Cancellation.builder()
                                .canceledAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .canceledBy(null)
                                .build()
                        )
                        .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                        .createdBy(
                            WireTransfer.CreatedBy.builder()
                                .apiKey(
                                    WireTransfer.CreatedBy.ApiKey.builder()
                                        .description("description")
                                        .build()
                                )
                                .category(WireTransfer.CreatedBy.Category.USER)
                                .oauthApplication(
                                    WireTransfer.CreatedBy.OAuthApplication.builder()
                                        .name("name")
                                        .build()
                                )
                                .user(
                                    WireTransfer.CreatedBy.User.builder()
                                        .email("user@example.com")
                                        .build()
                                )
                                .build()
                        )
                        .currency(WireTransfer.Currency.USD)
                        .externalAccountId("external_account_ukk55lr923a3ac0pp7iv")
                        .idempotencyKey(null)
                        .inboundWireDrawdownRequestId(null)
                        .messageToRecipient("Message to recipient")
                        .network(WireTransfer.Network.WIRE)
                        .originatorAddressLine1(null)
                        .originatorAddressLine2(null)
                        .originatorAddressLine3(null)
                        .originatorName(null)
                        .pendingTransactionId(null)
                        .remittance(
                            WireTransfer.Remittance.builder()
                                .category(WireTransfer.Remittance.Category.UNSTRUCTURED)
                                .tax(
                                    WireTransfer.Remittance.Tax.builder()
                                        .date(LocalDate.parse("2019-12-27"))
                                        .identificationNumber("identification_number")
                                        .typeCode("type_code")
                                        .build()
                                )
                                .unstructured(
                                    WireTransfer.Remittance.Unstructured.builder()
                                        .message("Payment for invoice 12345")
                                        .build()
                                )
                                .build()
                        )
                        .reversal(
                            WireTransfer.Reversal.builder()
                                .amount(12345L)
                                .createdAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .debtorRoutingNumber("101050001")
                                .description("Inbound wire reversal 2022021100335128")
                                .inputCycleDate(LocalDate.parse("2022-02-11"))
                                .inputMessageAccountabilityData("20220211B6B7HU2R011023")
                                .inputSequenceNumber("11023")
                                .inputSource("B6B7HU2R")
                                .instructionIdentification(null)
                                .returnReasonAdditionalInformation(null)
                                .returnReasonCode(null)
                                .returnReasonCodeDescription(null)
                                .transactionId("transaction_uyrp7fld2ium70oa7oi")
                                .wireTransferId("wire_transfer_5akynk7dqsq25qwk9q2u")
                                .build()
                        )
                        .routingNumber("101050001")
                        .sourceAccountNumberId(null)
                        .status(WireTransfer.Status.COMPLETE)
                        .submission(
                            WireTransfer.Submission.builder()
                                .inputMessageAccountabilityData("20220118MMQFMP0P000002")
                                .submittedAt(OffsetDateTime.parse("2020-01-31T23:59:59Z"))
                                .build()
                        )
                        .transactionId("transaction_uyrp7fld2ium70oa7oi")
                        .type(WireTransfer.Type.WIRE_TRANSFER)
                        .build()
                )
                .nextCursor("v57w5d")
                .build()

        val roundtrippedWireTransferListPageResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(wireTransferListPageResponse),
                jacksonTypeRef<WireTransferListPageResponse>(),
            )

        assertThat(roundtrippedWireTransferListPageResponse).isEqualTo(wireTransferListPageResponse)
    }
}
